var Amplitude=function(){function e(e){if(!ne.initialized){ne.debug=void 0!=e.debug?e.debug:!1;var t=!1;e.songs?0!=e.songs.length?(ne.songs=e.songs,t=!0):O("Please add some songs, to your songs object!"):O("Please provide a songs object for AmplitudeJS to run!"),t&&(ne.soundcloud_client=void 0!=e.soundcloud_client?e.soundcloud_client:"",""!=ne.soundcloud_client?(se=e,R()):w(e))}}function t(e){ne.debug=e}function a(){return ne.active_metadata}function n(e,t){ne.visualizations[e.getID]=e,void 0!=t&&e.setPreferences(t)}function s(e){J(),ne.active_visualization=e,U()}function o(){return window.AudioContext?!0:!1}function l(e){return ne.songs[e]}function u(e){return ne.songs.push(e),ne.songs.length-1}function r(){Q("before_play"),ne.active_metadata.live&&g(),ne.active_song.play(),Q("after_play")}function c(){ne.active_song.pause(),ne.active_metadata.live&&_()}function d(){Q("before_stop"),ne.active_song.currentTime=0,ne.active_song.pause(),ne.active_metadata.live&&_(),Q("after_stop")}function m(e){ne.active_song.volume=e/100}function v(e){ne.active_metadata.live||(ne.active_song.currentTime=ne.active_song.duration*(e/100))}function _(){ne.active_song.src="",ne.active_song.load()}function g(){ne.active_song.src=ne.active_metadata.url,ne.active_song.load()}function f(){var e=this.getAttribute("amplitude-song-index");N(e)?(P(),C(),this.classList.add("amplitude-playing"),this.classList.remove("amplitude-paused"),document.querySelector('[amplitude-main-play-pause="true"]')&&(main_control=document.querySelector('[amplitude-main-play-pause="true"]'),main_control.classList.add("amplitude-playing"),main_control.classList.remove("amplitude-paused")),U(),r()):ne.active_song.paused?(this.classList.add("amplitude-playing"),this.classList.remove("amplitude-paused"),document.querySelector('[amplitude-main-play-pause="true"]')&&(main_control=document.querySelector('[amplitude-main-play-pause="true"]'),main_control.classList.add("amplitude-playing"),main_control.classList.remove("amplitude-paused")),U(),r(this.getAttribute("amplitude-song-index"))):(this.classList.add("amplitude-paused"),this.classList.remove("amplitude-playing"),document.querySelector('[amplitude-main-play-pause="true"]')&&(main_control=document.querySelector('[amplitude-main-play-pause="true"]'),main_control.classList.add("amplitude-paused"),main_control.classList.remove("amplitude-playing")),c())}function p(){var e=this.getAttribute("amplitude-song-index");N(e)&&C(),U(),r()}function h(){c()}function b(){J(),d()}function y(){0==ne.volume?ne.volume=ne.pre_mute_volume:(ne.pre_mute_volume=ne.volume,ne.volume=0),m(100*ne.volume),M()}function x(){ne.volume=100*ne.volume+ne.volume_increment<=100?ne.volume+ne.volume_increment/100:1,m(100*ne.volume),M()}function S(){ne.volume=100*ne.volume-ne.volume_decrement>0?ne.volume-ne.volume_decrement/100:0,m(100*ne.volume),M()}function L(){ne.volume=this.value/100,m(this.value),M()}function A(){ne.active_song.paused||(this.getAttribute("amplitude-singular-song-slider")&&v(this.value),this.getAttribute("amplitude-song-index")==ne.active_index&&v(this.value))}function E(){Q("before_next"),d(),ne.shuffle_on?parseInt(ne.shuffle_active_index)+1<ne.shuffle_list.length?(H(ne.suffle_list[parseInt(ne.shuffle_active_index)+1].album),ne.active_song.src=ne.shuffle_list[parseInt(ne.shuffle_active_index)+1].url,ne.active_metadata=ne.shuffle_list[parseInt(ne.shuffle_active_index)+1],ne.active_album=ne.shuffle_list[parseInt(ne.shuffle_active_index)+1].album,ne.album_change&&(Q("after_album_change"),ne.album_change=!1),ne.shuffle_active_index=parseInt(ne.shuffle_active_index)+1):(H(ne.suffle_list[0].album),ne.active_song.src=ne.shuffle_list[0].url,ne.active_metadata=ne.shuffle_list[0],ne.active_album=ne.shuffle_list[0].album,ne.album_change&&(Q("after_album_change"),ne.album_change=!1),ne.shuffle_active_index=0):parseInt(ne.active_index)+1<ne.songs.length?(H(ne.songs[parseInt(ne.active_index)+1].album),ne.active_song.src=ne.songs[parseInt(ne.active_index)+1].url,ne.active_metadata=ne.songs[parseInt(ne.active_index)+1],ne.active_album=ne.songs[parseInt(ne.active_index)+1].album,ne.album_change&&(Q("after_album_change"),ne.album_change=!1),ne.active_index=parseInt(ne.active_index)+1):(H(ne.songs[0].album),ne.active_song.src=ne.songs[0].url,ne.active_metadata=ne.songs[0],ne.active_album=ne.songs[0].album,ne.album_change&&(Q("after_album_change"),ne.album_change=!1),ne.active_index=0),document.querySelector('[amplitude-main-play-pause="true"]')&&(main_control=document.querySelector('[amplitude-main-play-pause="true"]'),main_control.classList.add("amplitude-playing"),main_control.classList.remove("amplitude-paused")),V(),Q("after_next")}function z(){Q("before_prev"),d(),ne.shuffle_on?parseInt(ne.shuffle_active_index)-1>=0?(H(ne.suffle_list[parseInt(ne.shuffle_active_index)-1].album),ne.active_song.src=ne.shuffle_list[parseInt(ne.shuffle_active_index)-1].url,ne.active_metadata=ne.shuffle_list[parseInt(ne.shuffle_active_index)-1],ne.active_album=ne.shuffle_list[parseInt(ne.shuffle_active_index)-1].album,ne.album_change&&(Q("after_album_change"),ne.album_change=!1),ne.shuffle_active_index=parseInt(ne.shuffle_active_index)-1):(H(ne.suffle_list[parseInt(ne.shuffle_list.length-1)].album),ne.active_song.src=ne.shuffle_list[parseInt(ne.shuffle_list.length-1)].url,ne.active_metadata=ne.shuffle_list[parseInt(ne.shuffle_list.length-1)],ne.active_album=ne.shuffle_list[parseInt(ne.shuffle_list.length-1)].album,ne.album_change&&(Q("after_album_change"),ne.album_change=!1),ne.shuffle_active_index=parseInt(ne.shuffle_list.length)-1):parseInt(ne.active_index)-1>=0?(H(ne.songs[parseInt(ne.active_index)-1].album),ne.active_song.src=ne.songs[parseInt(ne.active_index)-1].url,ne.active_metadata=ne.songs[parseInt(ne.active_index)-1],ne.active_album=ne.songs[parseInt(ne.active_index)-1].album,ne.album_change&&(Q("after_album_change"),ne.album_change=!1),ne.active_index=parseInt(ne.active_index)-1):(H(ne.songs[ne.songs.length-1].album),ne.active_song.src=ne.songs[ne.songs.length-1].url,ne.active_metadata=ne.songs[ne.songs.length-1],ne.active_album=ne.songs[ne.songs.length-1].album,ne.album_change&&(Q("after_album_change"),ne.album_change=!1),ne.active_index=parseInt(ne.songs.length)-1),document.querySelector('[amplitude-main-play-pause="true"]')&&(main_control=document.querySelector('[amplitude-main-play-pause="true"]'),main_control.classList.add("amplitude-playing"),main_control.classList.remove("amplitude-paused")),V(),Q("after_prev")}function I(){ne.shuffle_on?(ne.shuffle_on=!1,ne.shuffle_list={},ne.shuffle_active_index=0):(ne.shuffle_on=!0,G()),T()}function P(){for(var e=document.getElementsByClassName("amplitude-play-pause"),t=0;t<e.length;t++)e[t].classList.add("amplitude-paused"),e[t].classList.remove("amplitude-playing")}function C(){for(var e=document.getElementsByClassName("amplitude-song-slider"),t=0;t<e.length;t++)e[t].value=0}function M(){for(var e=document.getElementsByClassName("amplitude-volume-slider"),t=0;t<e.length;t++)e[t].value=100*ne.active_song.volume}function q(){if(!window.AudioContext||navigator.userAgent.toLowerCase().indexOf("firefox")>-1)switch(ne.visualization_backup){case"nothing":document.getElementById("amplitude-visualization").remove();break;case"album-art":var e=document.getElementById("amplitude-visualization"),t=e.parentNode,a=document.createElement("img");a.setAttribute("amplitude-song-info","cover"),a.setAttribute("class","amplitude-album-art"),document.querySelector('[amplitude-song-info="cover"]')&&(void 0!=ne.active_metadata.cover_art_url?(a.setAttribute("src",ne.active_metadata.cover_art_url),document.querySelector('[amplitude-song-info="cover"]').setAttribute("src",ne.active_metadata.cover_art_url)):""!=ne.default_album_art?a.setAttribute("src",ne.default_album_art):a.setAttribute("src","")),t.replaceChild(a,e)}}function B(){for(var e=document.getElementsByClassName("amplitude-current-minutes"),t=0;t<e.length;t++)e[t].innerHTML="0";for(var a=document.getElementsByClassName("amplitude-current-seconds"),t=0;t<a.length;t++)a[t].innerHTML="00"}function k(){for(var e=document.getElementsByClassName("amplitude-song-container"),t=0;t<e.length;t++)e[t].classList.remove("amplitude-active-song-container")}function T(){for(var e=document.getElementsByClassName("amplitude-shuffle"),t=0;t<e.length;t++)ne.shuffle_on?(e[t].classList.add("amplitude-shuffle-on"),e[t].classList.remove("amplitude-shuffle-off")):(e[t].classList.remove("amplitude-shuffle-on"),e[t].classList.add("amplitude-shuffle-off"))}function w(e){void 0!=e.start_song?(ne.active_song.src=ne.songs[e.start_song].url,ne.active_metadata=ne.songs[e.start_song],ne.active_album=ne.songs[e.start_song].album,ne.active_index=e.start_song):(ne.active_song.src=ne.songs[0].url,ne.active_metadata=ne.songs[0],ne.active_album=ne.songs[0].album,ne.active_index=0),void 0==ne.active_metadata.live&&(ne.active_metadata.live=!1),ne.active_song.preload=void 0!=e.preload?e.preload:"metadata",ne.callbacks=void 0!=e.callbacks?e.callbacks:{},ne.volume=void 0!=e.volume?e.volume:.5,ne.visualization_backup=void 0!=e.visualization_backup?e.visualization_backup:"nothing",ne.pre_mute_volume=void 0!=e.volume?e.volume:.5,ne.volume_increment=void 0!=e.volume_increment?e.volume_increment:5,ne.volume_decrement=void 0!=e.volume_decrement?e.volume_decrement:5,ne.default_album_art=void 0!=e.default_album_art?e.default_album_art:"",ne.active_song.volume=ne.volume,ne.handle_song_elements=void 0!=e.handle_song_elements?e.handle_song_elements:!0,ne.song_ended_callback=void 0!=e.song_ended_callback?e.song_ended_callback:"",ne.initialized=!0,M(),q(),B(),C(),j(),ne.handle_song_elements&&$(),k(),F(),se={}}function O(e){ne.debug&&console.log(e)}function N(e){return null!=e&&e!=ne.active_index?(d(),H(ne.songs[e].album),ne.active_song.src=ne.songs[e].url,ne.active_metadata=ne.songs[e],ne.active_album=ne.songs[e].album,ne.album_change&&(Q("after_album_change"),ne.album_change=!1),ne.active_index=e,ne.handle_song_elements&&$(),B(),j(),F(),!0):!1}function H(e){ne.active_album!=e&&(ne.album_change=!0,Q("before_album_change"))}function V(){j()&&U(),ne.handle_song_elements&&$(),C(),B(),k(),F(),r()}function j(){var e=!1;return ne.active_metadata.visualization&&(ne.active_metadata.visualization!=ne.active_visualization&&""!=ne.active_visualization&&(J(),e=!0),ne.active_visualization=ne.active_metadata.visualization),e}function D(){ne.songs.length>1&&(d(),ne.shuffle_on?parseInt(ne.shuffle_active_index)+1<ne.shuffle_list.length?(ne.active_song.src=ne.shuffle_list[parseInt(ne.shuffle_active_index)+1].url,ne.active_metadata=ne.shuffle_list[parseInt(ne.shuffle_active_index)+1],ne.shuffle_active_index=parseInt(ne.shuffle_active_index)+1):(ne.active_song.src=ne.shuffle_list[0].url,ne.active_metadata=ne.shuffle_list[0],ne.shuffle_active_index=0):parseInt(ne.active_index)+1<ne.songs.length?(ne.active_song.src=ne.songs[parseInt(ne.active_index)+1].url,ne.active_metadata=ne.songs[parseInt(ne.active_index)+1],ne.active_index=parseInt(ne.active_index)+1):(ne.active_song.src=ne.songs[0].url,ne.active_metadata=ne.songs[0],ne.active_index=0),V()),Q("after_song_ended")}function W(){var e=(Math.floor(ne.active_song.currentTime%60)<10?"0":"")+Math.floor(ne.active_song.currentTime%60),t=Math.floor(ne.active_song.currentTime/60),a=(Math.floor(ne.active_song.duration%60)<10?"0":"")+Math.floor(ne.active_song.duration%60),i=Math.floor(ne.active_song.duration/60),n="";n=document.querySelector(document.querySelector('[amplitude-singular-song-slider="true"]')?'[amplitude-singular-song-slider="true"]':'input[amplitude-song-index="'+ne.active_index+'"]');var s="";if(s=document.querySelector(document.querySelector('[amplitude-single-song-time-visualization="true"]')?'[amplitude-single-song-time-visualization="true"]':'.amplitude-song-time-visualization[amplitude-song-index="'+ne.active_index+'"]'),document.querySelector('[amplitude-single-current-minutes="true"]')?document.querySelector('[amplitude-single-current-minutes="true"]').innerHTML=t:document.querySelector('.amplitude-current-minutes[amplitude-song-index="'+ne.active_index+'"]')&&(document.querySelector('.amplitude-current-minutes[amplitude-song-index="'+ne.active_index+'"]').innerHTML=t),document.querySelector('[amplitude-single-current-seconds="true"]')?document.querySelector('[amplitude-single-current-seconds="true"]').innerHTML=e:document.querySelector('.amplitude-current-seconds[amplitude-song-index="'+ne.active_index+'"]')&&(document.querySelector('.amplitude-current-seconds[amplitude-song-index="'+ne.active_index+'"]').innerHTML=e),ne.active_metadata.live||(document.querySelector('[amplitude-single-duration-seconds="true"]')?document.querySelector('[amplitude-single-duration-seconds="true"]').innerHTML=a:document.querySelector('.amplitude-duration-seconds[amplitude-song-index="'+ne.active_index+'"]')&&(document.querySelector('.amplitude-duration-seconds[amplitude-song-index="'+ne.active_index+'"]').innerHTML=a),document.querySelector('[amplitude-single-duration-minutes="true"]')?document.querySelector('[amplitude-single-duration-minutes="true"]').innerHTML=i:document.querySelector('.amplitude-duration-minutes[amplitude-song-index="'+ne.active_index+'"]')&&(document.querySelector('.amplitude-duration-minutes[amplitude-song-index="'+ne.active_index+'"]').innerHTML=i)),!ne.active_metadata.live&&n&&(n.value=ne.active_song.currentTime/ne.active_song.duration*100),!ne.active_metadata.live&&s){var o=s.querySelectorAll(".amplitude-song-time-visualization-status"),l=s.offsetWidth;o[0].setAttribute("style","width:"+l*(ne.active_song.currentTime/ne.active_song.duration)+"px")}}function U(){if(!ne.visualization_started&&Object.keys(ne.visualizations).length>0){if(""!=ne.active_visualization)ne.visualizations[ne.active_visualization].startVisualization(ne.active_song),ne.current_visualization=ne.visualizations[ne.active_visualization];else{for(first_visualization in ne.visualizations);ne.visualizations[first_visualization].startVisualization(ne.active_song),ne.current_visualization=ne.visualizations[first_visualization]}ne.visualization_started=!0}}function J(){ne.visualization_started&&Object.keys(ne.visualizations).length>0&&(ne.current_visualization.stopVisualization(),ne.visualization_started=!1)}function $(){document.querySelector('[amplitude-song-info="name"]')&&(document.querySelector('[amplitude-song-info="name"]').innerHTML=ne.active_metadata.name),document.querySelector('[amplitude-song-info="artist"]')&&(document.querySelector('[amplitude-song-info="artist"]').innerHTML=ne.active_metadata.artist),document.querySelector('[amplitude-song-info="album"]')&&(document.querySelector('[amplitude-song-info="album"]').innerHTML=ne.active_metadata.album),document.querySelector('[amplitude-song-info="cover"]')&&(void 0!=ne.active_metadata.cover_art_url?document.querySelector('[amplitude-song-info="cover"]').setAttribute("src",ne.active_metadata.cover_art_url):""!=ne.default_album_art?document.querySelector('[amplitude-song-info="cover"]').setAttribute("src",ne.default_album_art):document.querySelector('[amplitude-song-info="cover"]').setAttribute("src",""))}function F(){var e=document.getElementsByClassName("amplitude-song-container");for(i=0;i<e.length;i++)e[i].classList.remove("amplitude-active-song-container");document.querySelector('.amplitude-song-container[amplitude-song-index="'+ne.active_index+'"]')&&document.querySelector('.amplitude-song-container[amplitude-song-index="'+ne.active_index+'"]').classList.add("amplitude-active-song-container")}function G(){var e=new Array(ne.songs.length);for(i=0;i<ne.songs.length;i++)e[i]=ne.songs[i];for(i=ne.songs.length-1;i>0;i--)rand_num=Math.floor(Math.random()*ne.songs.length+1),K(e,i,rand_num-1);ne.shuffle_list=e}function K(e,t,a){var i=e[t];e[t]=e[a],e[a]=i}function Q(e){if(ne.callbacks[e]){var t=window[ne.callbacks[e]];t()}}function R(){var e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src="http://connect.soundcloud.com/sdk.js",t.onreadystatechange=X,t.onload=X,e.appendChild(t)}function X(){SC.initialize({client_id:ne.soundcloud_client}),Y()}function Y(){for(var e=/^https?:\/\/(soundcloud.com|snd.sc)\/(.*)$/,t=0;t<ne.songs.length;t++)ne.songs[t].url.match(e)&&(ne.soundcloud_song_count++,Z(ne.songs[t].url,t))}function Z(e,t){SC.get("/resolve/?url="+e,function(e){e.streamable?ne.songs[t].url=e.stream_url+"?client_id="+ne.soundcloud_client:ne.debug&&O(ne.songs[t].name+" by "+ne.songs[t].artist+" is not streamable by the Soundcloud API"),ne.soundcloud_songs_ready++,ne.soundcloud_songs_ready==ne.soundcloud_song_count&&w(se)})}function ee(){ne.active_song.addEventListener("timeupdate",W),ne.active_song.addEventListener("ended",D);for(var e=document.getElementsByClassName("amplitude-play"),t=0;t<e.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?e[t].addEventListener("touchstart",p):e[t].addEventListener("click",p);for(var a=document.getElementsByClassName("amplitude-pause"),t=0;t<a.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?a[t].addEventListener("touchstart",h):a[t].addEventListener("click",h);for(var i=document.getElementsByClassName("amplitude-stop"),t=0;t<i.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?i[t].addEventListener("touchstart",b):i[t].addEventListener("click",b);for(var n=document.getElementsByClassName("amplitude-play-pause"),t=0;t<n.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?n[t].addEventListener("touchstart",f):n[t].addEventListener("click",f);for(var s=document.getElementsByClassName("amplitude-mute"),t=0;t<s.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?/iPhone|iPad|iPod/i.test(navigator.userAgent)?O("iOS does NOT allow volume to be set through javascript: https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW4"):s[t].addEventListener("touchstart",y):s[t].addEventListener("click",y);for(var o=document.getElementsByClassName("amplitude-volume-up"),t=0;t<o.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?/iPhone|iPad|iPod/i.test(navigator.userAgent)?O("iOS does NOT allow volume to be set through javascript: https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW4"):o[t].addEventListener("touchstart",x):o[t].addEventListener("click",x);for(var l=document.getElementsByClassName("amplitude-volume-down"),t=0;t<l.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?/iPhone|iPad|iPod/i.test(navigator.userAgent)?O("iOS does NOT allow volume to be set through javascript: https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW4"):l[t].addEventListener("touchstart",S):l[t].addEventListener("click",S);for(var u=document.getElementsByClassName("amplitude-song-slider"),t=0;t<u.length;t++)u[t].addEventListener("input",A);for(var r=document.getElementsByClassName("amplitude-volume-slider"),t=0;t<r.length;t++)/iPhone|iPad|iPod/i.test(navigator.userAgent)?O("iOS does NOT allow volume to be set through javascript: https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW4"):r[t].addEventListener("input",L);for(var c=document.getElementsByClassName("amplitude-next"),t=0;t<c.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?c[t].addEventListener("touchstart",E):c[t].addEventListener("click",E);for(var d=document.getElementsByClassName("amplitude-prev"),t=0;t<d.length;t++)/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?d[t].addEventListener("touchstart",z):d[t].addEventListener("click",z);for(var m=document.getElementsByClassName("amplitude-shuffle"),t=0;t<m.length;t++)m[t].classList.remove("amplitude-shuffle-on"),m[t].classList.add("amplitude-shuffle-off"),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?m[t].addEventListener("touchstart",I):m[t].addEventListener("click",I);for(var v=document.getElementsByClassName("amplitude-song-time-visualization"),t=0;t<v.length;t++){var _=document.createElement("div");_.classList.add("amplitude-song-time-visualization-status"),_.setAttribute("style","width: 0px"),v[t].appendChild(_)}}document.onreadystatechange=function(){"complete"==document.readyState&&ee()};var te,ae,ie,ne={active_song:new Audio,active_metadata:{},active_album:"",active_index:0,album_change:!1,callbacks:{},songs:{},shuffle_list:{},shuffle_on:!1,shuffle_active_index:0,default_album_art:"",debug:!1,initialized:!1,handle_song_elements:!0,volume:.5,pre_mute_volume:.5,volume_increment:5,volume_decrement:5,visualizations:new Array,active_visualization:"",current_visualization:{},visualization_started:!1,visualization_backup:"",song_ended_callback:"",soundcloud_client:"",soundcloud_song_count:0,soundcloud_songs_ready:0},se={};return!window.AudioContext||navigator.userAgent.toLowerCase().indexOf("firefox")>-1||(te=new AudioContext,ae=te.createAnalyser(),ie=te.createMediaElementSource(ne.active_song),ie.connect(ae),ae.connect(te.destination)),{init:e,setDebug:t,getActiveSongMetadata:a,getSongByIndex:l,registerVisualization:n,visualizationCapable:o,changeVisualization:s,addSong:u,analyser:ae,source:ie}}();